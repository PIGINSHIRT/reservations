<view class="page">
  <!-- 顶部欢迎区 -->
  <view class="welcome-section">
    <view class="logo-area">
      <text class="mascot">🐻</text>
      <view class="welcome-text">
        <text class="title">欢迎光临！</text>
        <text class="subtitle">小Go的电话是</text>
        <text class="phone">(152-7343-7210)</text>
        <text class="wechat">微信同号 有空常联系^^</text>
      </view>
    </view>
  </view>

  <!-- 营业信息 -->
  <view class="info-card">
    <view class="info-item">
      <text class="icon">🕐</text>
      <text class="info-text">营业时间: 07:00 - 23:59</text>
    </view>
    <view class="info-item">
      <text class="icon">📞</text>
      <text class="info-text">电话：<text class="highlight">15273437210</text></text>
    </view>
    <view class="info-item">
      <text class="icon">📍</text>
      <text class="info-text">湖南省衡阳市蒸湘区博达绿岛A栋1804室</text>
    </view>
  </view>

  <!-- 功能按钮 -->
  <view class="function-buttons">
    <view class="func-btn" bindtap="contactService">
      <text class="func-icon">👨‍💼</text>
      <text class="func-text">联系客服</text>
    </view>
    <view class="func-btn" bindtap="gotoCard">
      <text class="func-icon">🎫</text>
      <text class="func-text">卡券套餐</text>
    </view>
    <view class="func-btn" bindtap="connectWifi">
      <text class="func-icon">💡</text>
      <text class="func-text">wifi链接</text>
    </view>
    <view wx:if="{{hasActiveBooking}}" bindtap="goToPass" 
        style="background: #e6f7ff; padding: 20rpx; margin: 20rpx; border-radius: 10rpx; display: flex; justify-content: space-between; align-items: center; border: 1px solid #91d5ff; box-shadow: 0 4rpx 10rpx rgba(24,144,255,0.1);">
    <view style="display: flex; align-items: center;">
      <text style="font-size: 30rpx; margin-right: 10rpx;">🟢</text>
      <text style="color: #1890ff; font-weight: bold; font-size: 28rpx;">当前有生效预约</text>
    </view>
    <view style="background: #1890ff; color: white; padding: 10rpx 30rpx; border-radius: 30rpx; font-size: 26rpx;">去开门 ></view>
  </view>
  </view>

  <!-- 座位预定 -->
  <view class="booking-card">
    <view class="search-tip" bindtap="viewSeatMap">
      <text class="search-icon">🔍</text>
      <text>查看座位图</text>
    </view>

    <text class="booking-title">座位预定</text>

    <view class="booking-type">
      <view class="type-btn {{bookingType === 'day' ? 'active' : ''}}" bindtap="selectBookingType" data-type="day">
        按天订座
      </view>
      <view class="type-btn {{bookingType === 'hour' ? 'active' : ''}}" bindtap="selectBookingType" data-type="hour">
        按小时订座
      </view>
    </view>

    <view class="date-selector">
      <view class="date-box">
        <text class="date-label">开始日期</text>
        <text class="date-value">{{startDate || '请选择'}}</text>
      </view>
      <text class="date-sep">至</text>
      <view class="date-box">
        <text class="date-label">结束日期</text>
        <text class="date-value">{{endDate || '自动计算'}}</text>
      </view>
    </view>

    <view class="duration-buttons">
      <view class="duration-btn {{selectedDuration === '1天' ? 'selected' : ''}}" bindtap="openCalendar" data-duration="1天">1天</view>
      <view class="duration-btn {{selectedDuration === '7天' ? 'selected' : ''}}" bindtap="openCalendar" data-duration="7天">7天</view>
      <view class="duration-btn {{selectedDuration === '30天' ? 'selected' : ''}}" bindtap="openCalendar" data-duration="30天">30天</view>
      <view class="duration-btn {{selectedDuration === '90天' ? 'selected' : ''}}" bindtap="openCalendar" data-duration="90天">90天</view>
      <view class="duration-btn {{selectedDuration === 'custom' ? 'selected' : ''}}" bindtap="openCalendar" data-duration="custom">自定义</view>
    </view>

    <button class="booking-btn" bindtap="confirmBooking">立即预定</button>
  </view>

  <view class="calendar-modal" wx:if="{{showCalendar}}">
    <view class="modal-mask" bindtap="closeCalendar"></view>
    <view class="calendar-box">
      <view class="cal-header">
        <view class="cal-month-switch" bindtap="prevMonth">◀</view>
        <view class="cal-title">{{currentYear}}年 {{currentMonth}}月</view>
        <view class="cal-month-switch" bindtap="nextMonth">▶</view>
      </view>
      
      <view class="cal-weeks">
        <view class="week-item">日</view>
        <view class="week-item">一</view>
        <view class="week-item">二</view>
        <view class="week-item">三</view>
        <view class="week-item">四</view>
        <view class="week-item">五</view>
        <view class="week-item">六</view>
      </view>

      <view class="cal-grid">
        <block wx:for="{{calendarDays}}" wx:key="dateStr">
          <view 
            class="day-item {{item.disabled ? 'disabled' : ''}} {{item.isStart ? 'start-day' : ''}} {{item.isEnd ? 'end-day' : ''}} {{item.inRange ? 'in-range' : ''}}" 
            bindtap="onDayTap" 
            data-date="{{item.dateStr}}">
            {{item.day}}
          </view>
        </block>
      </view>

      <view class="cal-tips">
        <text wx:if="{{selectedDuration === 'custom'}}">请选择：{{tempStartDate ? '结束日期' : '开始日期'}}</text>
        <text wx:else>请选择开始日期（共 {{selectedDuration}}）</text>
      </view>
    </view>
  </view>

  <!-- 学习区域介绍 -->
  <view class="area-intro">
    <text class="area-title">学习区域介绍</text>
    <text class="area-subtitle">室内环境图</text>
    <view class="area-images">
      <view class="area-img">🚪</view>
      <view class="area-img">🏢</view>
    </view>
  </view>
</view>